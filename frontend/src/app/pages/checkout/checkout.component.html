<div class="checkout-page">
  <div class="container">
    <h1 class="page-title">Checkout</h1>

    <div *ngIf="cartItems.length > 0; else emptyCart" class="checkout-content">
      <div class="checkout-form-section">
        <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()">
          <div class="form-section">
            <h2>Shipping Information</h2>
            
            <div class="form-group">
              <label>Full Name *</label>
              <input type="text" formControlName="customerName" class="input" />
              <span class="error" *ngIf="checkoutForm.get('customerName')?.hasError('required') && checkoutForm.get('customerName')?.touched">
                Name is required
              </span>
            </div>

            <div class="form-group">
              <label>Email *</label>
              <input type="email" formControlName="email" class="input" />
              <span class="error" *ngIf="checkoutForm.get('email')?.hasError('required') && checkoutForm.get('email')?.touched">
                Email is required
              </span>
              <span class="error" *ngIf="checkoutForm.get('email')?.hasError('email') && checkoutForm.get('email')?.touched">
                Invalid email format
              </span>
            </div>

            <div class="form-group">
              <label>Phone *</label>
              <input type="tel" formControlName="phone" class="input" />
              <span class="error" *ngIf="checkoutForm.get('phone')?.hasError('required') && checkoutForm.get('phone')?.touched">
                Phone is required
              </span>
            </div>

            <div class="form-group">
              <label>Address *</label>
              <input type="text" formControlName="address" class="input" />
              <span class="error" *ngIf="checkoutForm.get('address')?.hasError('required') && checkoutForm.get('address')?.touched">
                Address is required
              </span>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>City *</label>
                <input type="text" formControlName="city" class="input" />
                <span class="error" *ngIf="checkoutForm.get('city')?.hasError('required') && checkoutForm.get('city')?.touched">
                  City is required
                </span>
              </div>

              <div class="form-group">
                <label>Zip Code *</label>
                <input type="text" formControlName="zipCode" class="input" />
                <span class="error" *ngIf="checkoutForm.get('zipCode')?.hasError('required') && checkoutForm.get('zipCode')?.touched">
                  Zip code is required
                </span>
              </div>
            </div>

            <button type="submit" class="btn btn-primary submit-btn" [disabled]="checkoutForm.invalid || isSubmitting">
              {{ isSubmitting ? 'Processing...' : 'Place Order' }}
            </button>
          </div>
        </form>
      </div>

      <div class="order-summary-section">
        <div class="summary-card">
          <h2>Order Summary</h2>
          
          <div class="order-items">
            <div class="order-item" *ngFor="let item of cartItems">
              <div class="item-info">
                <span class="item-name">{{ item.product.name }}</span>
                <span class="item-quantity">Qty: {{ item.quantity }}</span>
              </div>
              <span class="item-price">${{ (item.product.price * item.quantity).toFixed(2) }}</span>
            </div>
          </div>

          <div class="summary-totals">
            <div class="summary-row">
              <span>Subtotal:</span>
              <span>${{ subtotal.toFixed(2) }}</span>
            </div>
            <div class="summary-row">
              <span>Shipping:</span>
              <span>Free</span>
            </div>
            <div class="summary-row total">
              <span>Total:</span>
              <span>${{ total.toFixed(2) }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <ng-template #emptyCart>
      <div class="empty-cart">
        <div class="empty-cart-icon">ðŸ›’</div>
        <h2>Your cart is empty</h2>
        <p>Add some products to your cart before checkout</p>
        <a routerLink="/products" class="btn btn-primary">Browse Products</a>
      </div>
    </ng-template>
  </div>
</div>
